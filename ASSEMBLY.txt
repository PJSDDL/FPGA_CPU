JMP	IRQ:
//JMP测试，替换标号可进行不同测试
JMP	MAIN_CALL_TEST:		

//IO输入指令IN测试
//IO输出指令SETBIT、CLRBIT测试

MAIN_CALL_TEST:	
CALL	UART_SEND:


HALT:
IN
JMP	HALT:

DATA:
A:
X5
B:
XA
C:
0

IRQ:		//中断处理
OUT
RETI

UART_SEND:
//待发送数据放在B寄存器
UART_SEND_1:
READA	UART_MASK:
SETBIT
//延时
CALL	DELAY:		
//循环次数-1	
READA	UART_SEND_LEN:
PUSHA
POPB
MOVA	XFFFF
ADD	
SAVEA	UART_SEND_LEN:
MOVB	0
//判断是否结束发送
JE	END_SEND:
JMP	UART_SEND_1:
END_SEND:
//恢复初始值
MOVA	X8
SAVEA	UART_SEND_LEN:
MOVA	X1
SAVEA	UART_MASK:
RET


UART_SEND_LEN:
X8
UART_MASK:
X0001


DELAY:		//子函数
MOVA	XFF00
MOVB	X1
DELAY_ADD:
ADD
JE	DELAY_RET:
JMP	DELAY_ADD:
DELAY_RET:
RET